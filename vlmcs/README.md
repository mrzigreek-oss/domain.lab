## Установка и настройка *vlmcsd*

Вариант развертывания альтернативного KMS сервера, позволяющего активировать современные версии ОС Microsoft Windows/Windows Server и пакета Microsoft Office. Этот вариант реализован на базе ОС Debian GNU/Linux 11 (Bullseye) и исходных кодов открытого проекта [vlmcsd](https://github.com/Wind4/vlmcsd). Для своей работы KMS сервер vlmcsd не требует наличия купленных KMS-ключей или какой-либо онлайн-активации в Microsoft. 

Этот материал опирается на публично открытые программные продукты и не преследует цели нарушения норм действующего законодательства и правил лицензирования ПО.

#### Всё уже установлено и подготовлено к запуску 
#### После миграции виртуалки в proxmox переводим интерфейс в нужный статус
```bash
ip a 
#смотрим наш интерфейс
nano /etc/network/interfaces
#меняем интерфейс на тот что нужен нам
reboot
```
#### Создаём на контроллере домена запись в DNS с этой машиной, если не создалась автоматически, затем создаём SRV запись через оснастку
Правой кнопкой по domain.lab -> Другие новые записи
Выберите тип Расположение службы (SRV) -> Создать запись.
Заполните следующим образом:
    **Service:** `_vlmcs` (пишите руками, этого нет в списке).
    **Protocol:** `_tcp`
    **Port number:** `1688`
    **Host offering this service:** `kms-server.domain.lab` 

#### Заводим виртуалку в домен, если хотите создайте пользователя linuxroot для работы с виртуалкой, но я виртуалку после настройки трогать не буду. и после настроек закрываем ssh для рута. Не забудьте удалить пользователя user

```bash
realm discover domain.lab
realm join -U Administrator domain.lab
#если всё без ошибок проверяем результат
realm list
#отрезаем руту возможность захода через ssh
nano /etc/ssh/sshd_config`
#находим строчку PermitRootLogin, убираем коментирование и исправляем - PermitRootLogin no
```


# Поздравляю - вы великолепны!
<img width="974" height="485" alt="image" src="https://github.com/user-attachments/assets/7f0e8a76-8b37-474a-8e51-845a3580cb07" />
